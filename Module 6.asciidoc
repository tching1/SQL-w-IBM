+*In[1]:*+
[source, ipython3]
----
# Enter the connection string for your Db2 on Cloud database instance below
# %sql ibm_db_sa://my-username:my-password@my-hostname:my-port/my-db-name
%sql ibm_db_sa://rgq70481:fn35jzq003j%400wbs@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
----


+*Out[1]:*+
----
UsageError: Line magic function `%sql` not found.
----


+*In[9]:*+
[source, ipython3]
----
%sql ibm_db_sa://rgq70481:fn35jzq003j%400wbs@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
----


+*Out[9]:*+
----'Connected: rgq70481@BLUDB'----


+*In[3]:*+
[source, ipython3]
----
# Enter the connection string for your Db2 on Cloud database instance below
# %sql ibm_db_sa://my-username:my-password@my-hostname:my-port/my-db-name
%sql ibm_db_sa://rgq70481:fn35jzq003j%400wbs@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
----


+*Out[3]:*+
----'Connected: rgq70481@BLUDB'----


+*In[10]:*+
[source, ipython3]
----
# type in your query to retrieve list of all tables in the database for your db2 schema (username)
%sql select TABSCHEMA, TABNAME, CREATE_TIME from SYSCAT.TABLES where TABSCHEMA='rgq70481'
----


+*Out[10]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols=",,",options="header",]
|===
|tabschema |tabname |create_time
|===
----


+*In[11]:*+
[source, ipython3]
----
sql select count(*) from SYSCAT.COLUMNS where TABNAME = 'SCHOOLS'
----


+*Out[11]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols="",options="header",]
|===
|1
|78
|===
----


+*In[12]:*+
[source, ipython3]
----
%sql select COLNAME, TYPENAME, LENGTH from SYSCAT.COLUMNS where TABNAME = 'SCHOOLS'
----


+*Out[12]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols=",,",options="header",]
|===
|colname |typename |length
|Gr3_5_Grade_Level_Math__ |VARCHAR |4
|Gr3_5_Grade_Level_Read__ |VARCHAR |4
|Gr3_5_Keep_Pace_Read__ |VARCHAR |4
|Gr3_5_Keep_Pace_Math__ |VARCHAR |4
|Gr6_8_Grade_Level_Math__ |VARCHAR |4
|Gr6_8_Grade_Level_Read__ |VARCHAR |4
|Gr6_8_Keep_Pace_Math_ |VARCHAR |4
|Gr6_8_Keep_Pace_Read__ |VARCHAR |4
|Gr_8_Explore_Math__ |VARCHAR |4
|Gr_8_Explore_Read__ |VARCHAR |4
|ISAT_Exceeding_Math__ |DECIMAL |4
|ISAT_Exceeding_Reading__ |DECIMAL |4
|ISAT_Value_Add_Math |DECIMAL |3
|ISAT_Value_Add_Read |DECIMAL |3
|ISAT_Value_Add_Color_Math |VARCHAR |6
|ISAT_Value_Add_Color_Read |VARCHAR |6
|Students_Taking__Algebra__ |VARCHAR |4
|Students_Passing__Algebra__ |VARCHAR |4
|9th Grade EXPLORE (2009) |VARCHAR |4
|9th Grade EXPLORE (2010) |VARCHAR |4
|10th Grade PLAN (2009) |VARCHAR |4
|10th Grade PLAN (2010) |VARCHAR |4
|Net_Change_EXPLORE_and_PLAN |VARCHAR |3
|11th Grade Average ACT (2011) |VARCHAR |4
|Net_Change_PLAN_and_ACT |VARCHAR |3
|College_Eligibility__ |VARCHAR |4
|Graduation_Rate__ |VARCHAR |4
|College_Enrollment_Rate__ |VARCHAR |4
|COLLEGE_ENROLLMENT |SMALLINT |2
|General_Services_Route |SMALLINT |2
|Freshman_on_Track_Rate__ |VARCHAR |4
|X_COORDINATE |DECIMAL |13
|Y_COORDINATE |DECIMAL |13
|School_ID |INTEGER |4
|SCHOOL_NAME |VARCHAR |65
|SCHOOL_STAGE |VARCHAR |2
|Street_Address |VARCHAR |30
|City |VARCHAR |7
|State |VARCHAR |2
|ZIP_Code |INTEGER |4
|Phone_Number |VARCHAR |14
|Link |VARCHAR |78
|Network_Manager |VARCHAR |40
|Collaborative_Name |VARCHAR |34
|Adequate_Yearly_Progress_Made_ |VARCHAR |3
|Track_Schedule |VARCHAR |12
|CPS_Performance_Policy_Status |VARCHAR |16
|CPS_Performance_Policy_Level |VARCHAR |15
|HEALTHY_SCHOOL_CERTIFIED |VARCHAR |3
|Safety_Icon |VARCHAR |11
|SAFETY_SCORE |SMALLINT |2
|Family_Involvement_Icon |VARCHAR |11
|Family_Involvement_Score |VARCHAR |3
|Environment_Icon |VARCHAR |11
|Environment_Score |SMALLINT |2
|Instruction_Icon |VARCHAR |11
|Instruction_Score |SMALLINT |2
|Leaders_Icon |VARCHAR |11
|Leaders_Score |VARCHAR |3
|Teachers_Icon |VARCHAR |11
|Teachers_Score |VARCHAR |3
|Parent_Engagement_Icon |VARCHAR |7
|Parent_Engagement_Score |VARCHAR |3
|Parent_Environment_Icon |VARCHAR |7
|Parent_Environment_Score |VARCHAR |3
|AVERAGE_STUDENT_ATTENDANCE |VARCHAR |6
|Rate_of_Misconducts__per_100_students_ |DECIMAL |5
|Average_Teacher_Attendance |VARCHAR |6
|Individualized_Education_Program_Compliance_Rate |VARCHAR |7
|Pk_2_Literacy__ |VARCHAR |4
|Pk_2_Math__ |VARCHAR |4
|Latitude |DECIMAL |18
|Longitude |DECIMAL |18
|COMMUNITY_AREA_NUMBER |SMALLINT |2
|COMMUNITY_AREA_NAME |VARCHAR |22
|Ward |SMALLINT |2
|Police_District |SMALLINT |2
|Location |VARCHAR |27
|===
----


+*In[7]:*+
[source, ipython3]
----
%sql select count(*) from SCHOOLS where "SCHOOL_STAGE" = 'ES'
----


+*Out[7]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols="",options="header",]
|===
|1
|462
|===
----


+*In[13]:*+
[source, ipython3]
----
%sql select max(SAFETY_SCORE) from SCHOOLS;
----


+*Out[13]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols="",options="header",]
|===
|1
|99
|===
----


+*In[14]:*+
[source, ipython3]
----
%sql select SCHOOL_NAME from SCHOOLS where SAFETY_SCORE = ( select max(SAFETY_SCORE) from SCHOOLS ) 
----


+*Out[14]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols="",options="header",]
|===
|school_name
|Abraham Lincoln Elementary School
|Alexander Graham Bell Elementary School
|Annie Keller Elementary Gifted Magnet School
|Augustus H Burley Elementary School
|Edgar Allan Poe Elementary Classical School
|Edgebrook Elementary School
|Ellen Mitchell Elementary School
|James E McDade Elementary Classical School
|James G Blaine Elementary School
|LaSalle Elementary Language Academy
|Mary E Courtenay Elementary Language Arts Center
|Northside College Preparatory High School
|Northside Learning Center High School
|Norwood Park Elementary School
|Oriole Park Elementary School
|Sauganash Elementary School
|Stephen Decatur Classical Elementary School
|Talman Elementary School
|Wildwood Elementary School
|===
----


+*In[15]:*+
[source, ipython3]
----
%sql select Name_of_School, Average_Student_Attendance from SCHOOLS \
    order by Average_Student_Attendance desc nulls last limit 10   
----


+*Out[15]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
(ibm_db_dbi.ProgrammingError) ibm_db_dbi::ProgrammingError: SQLNumResultCols failed: [IBM][CLI Driver][DB2/LINUXX8664] SQL0206N  "NAME_OF_SCHOOL" is not valid in the context where it is used.  SQLSTATE=42703 SQLCODE=-206
[SQL: select Name_of_School, Average_Student_Attendance from SCHOOLS      order by Average_Student_Attendance desc nulls last limit 10]
(Background on this error at: http://sqlalche.me/e/13/f405)
----


+*In[16]:*+
[source, ipython3]
----
%sql select SCHOOL_NAME, Average_Student_Attendance from SCHOOLS \
    order by Average_Student_Attendance desc nulls last limit 10   
----


+*Out[16]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols=",",options="header",]
|===
|school_name |average_student_attendance
|John Charles Haines Elementary School |98.40%
|James Ward Elementary School |97.80%
|Edgar Allan Poe Elementary Classical School |97.60%
|Orozco Fine Arts & Sciences Elementary School |97.60%
|Rachel Carson Elementary School |97.60%
|Annie Keller Elementary Gifted Magnet School |97.50%
|Andrew Jackson Elementary Language Academy |97.40%
|Lenart Elementary Regional Gifted Center |97.40%
|Disney II Magnet School |97.30%
|John H Vanderpoel Elementary Magnet School |97.20%
|===
----


+*In[17]:*+
[source, ipython3]
----
%sql SELECT SCHOOL_NAME, Average_Student_Attendance  \
     from SCHOOLS \
     order by Average_Student_Attendance \
     fetch first 5 rows only
----


+*Out[17]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols=",",options="header",]
|===
|school_name |average_student_attendance
|Richard T Crane Technical Preparatory High School |57.90%
|Barbara Vick Early Childhood & Family Center |60.90%
|Dyett High School |62.50%
|Wendell Phillips Academy High School |63.00%
|Orr Academy High School |66.30%
|===
----


+*In[19]:*+
[source, ipython3]
----
%sql SELECT SCHOOL_NAME, REPLACE(Average_Student_Attendance, '%', '') \
     from SCHOOLS \
     order by Average_Student_Attendance \
     fetch first 5 rows only
----


+*Out[19]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols=",",options="header",]
|===
|school_name |2
|Richard T Crane Technical Preparatory High School |57.90
|Barbara Vick Early Childhood & Family Center |60.90
|Dyett High School |62.50
|Wendell Phillips Academy High School |63.00
|Orr Academy High School |66.30
|===
----


+*In[20]:*+
[source, ipython3]
----
%sql SELECT SCHOOL_NAME, Average_Student_Attendance  \
     from SCHOOLS \
     where DECIMAL ( REPLACE(Average_Student_Attendance, '%', '') ) < 70 \
     order by Average_Student_Attendance
----


+*Out[20]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols=",",options="header",]
|===
|school_name |average_student_attendance
|Richard T Crane Technical Preparatory High School |57.90%
|Barbara Vick Early Childhood & Family Center |60.90%
|Dyett High School |62.50%
|Wendell Phillips Academy High School |63.00%
|Orr Academy High School |66.30%
|Manley Career Academy High School |66.80%
|Chicago Vocational Career Academy High School |68.80%
|Roberto Clemente Community Academy High School |69.60%
|===
----


+*In[21]:*+
[source, ipython3]
----
%sql select Community_Area_Name, sum(College_Enrollment) AS TOTAL_ENROLLMENT \
   from SCHOOLS \
   group by Community_Area_Name 
----


+*Out[21]:*+
----
 * ibm_db_sa://rgq70481:***@dashdb-txn-sbox-yp-lon02-07.services.eu-gb.bluemix.net:50000/BLUDB
Done.

[cols=",",options="header",]
|===
|community_area_name |total_enrollment
|ALBANY PARK |6864
|ARCHER HEIGHTS |4823
|ARMOUR SQUARE |1458
|ASHBURN |6483
|AUBURN GRESHAM |4175
|AUSTIN |10933
|AVALON PARK |1522
|AVONDALE |3640
|BELMONT CRAGIN |14386
|BEVERLY |1636
|BRIDGEPORT |3167
|BRIGHTON PARK |9647
|BURNSIDE |549
|CALUMET HEIGHTS |1568
|CHATHAM |5042
|CHICAGO LAWN |7086
|CLEARING |2085
|DOUGLAS |4670
|DUNNING |4568
|EAST GARFIELD PARK |5337
|EAST SIDE |5305
|EDGEWATER |4600
|EDISON PARK |910
|ENGLEWOOD |6832
|FOREST GLEN |1431
|FULLER PARK |531
|GAGE PARK |9915
|GARFIELD RIDGE |4552
|GRAND BOULEVARD |2809
|GREATER GRAND CROSSING |4051
|HEGEWISCH |963
|HERMOSA |3975
|HUMBOLDT PARK |8620
|HYDE PARK |1930
|IRVING PARK |7764
|JEFFERSON PARK |1755
|KENWOOD |4287
|LAKE VIEW |7055
|LINCOLN PARK |5615
|LINCOLN SQUARE |4132
|LOGAN SQUARE |7351
|LOOP |871
|LOWER WEST SIDE |7257
|MCKINLEY PARK |1552
|MONTCLARE |1317
|MORGAN PARK |3271
|MOUNT GREENWOOD |2091
|NEAR NORTH SIDE |3362
|NEAR SOUTH SIDE |1378
|NEAR WEST SIDE |7975
|NEW CITY |7922
|NORTH CENTER |7541
|NORTH LAWNDALE |5146
|NORTH PARK |4210
|NORWOOD PARK |6469
|OAKLAND |140
|OHARE |786
|PORTAGE PARK |6954
|PULLMAN |1620
|RIVERDALE |1547
|ROGERS PARK |4068
|ROSELAND |7020
|SOUTH CHICAGO |4043
|SOUTH DEERING |1859
|SOUTH LAWNDALE |14793
|SOUTH SHORE |4543
|UPTOWN |4388
|WASHINGTON HEIGHTS |4006
|WASHINGTON PARK |2648
|WEST ELSDON |3700
|WEST ENGLEWOOD |5946
|WEST GARFIELD PARK |2622
|WEST LAWN |4207
|WEST PULLMAN |3240
|WEST RIDGE |8197
|WEST TOWN |9429
|WOODLAWN |4206
|===
----


+*In[ ]:*+
[source, ipython3]
----

----
